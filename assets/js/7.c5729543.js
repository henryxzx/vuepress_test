(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{250:function(e,t,r){"use strict";r.r(t);var _=r(28),v=Object(_.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("发表于 2018-12-06")]),e._v(" "),r("p",[r("a",{attrs:{href:"http://www.charlesproxy.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Charles"),r("OutboundLink")],1),e._v(" 是在 Mac 下常用的网络封包截取工具，在做\n移动开发时，我们为了调试与服务器端的网络通讯协议，常常需要截取网络封包来分析。")]),e._v(" "),r("p",[e._v("Charles 通过将自己设置成系统的网络访问代理服务器，使得所有的网络访问请求都通过它来完成，从而实现了网络封包的截取和分析。")]),e._v(" "),r("p",[e._v("除了在做移动开发中调试端口外，Charles 也可以用于分析第三方应用的通讯协议。配合 Charles 的 SSL 功能，Charles 还可以分析 Https 协议。")]),e._v(" "),r("p",[e._v("Charles 是收费软件，可以免费试用 30 天。试用期过后，未付费的用户仍然可以继续使用，但是每次使用时间不能超过 30 分钟，并且启动时将会有 10 秒种的延时。因此，该付费方案对广大用户还是相当友好的，即使你长期不付费，也能使用完整的软件功能。只是当你需要长时间进行封包调试时，会因为 Charles 强制关闭而遇到影响。")]),e._v(" "),r("p",[e._v("Charles 主要的功能包括：")]),e._v(" "),r("ol",[r("li",[e._v("截取 Http 和 Https 网络封包。")]),e._v(" "),r("li",[e._v("支持重发网络请求，方便后端调试。")]),e._v(" "),r("li",[e._v("支持修改网络请求参数。")]),e._v(" "),r("li",[e._v("支持网络请求的截获并动态修改。")]),e._v(" "),r("li",[e._v("支持模拟慢速网络。")])]),e._v(" "),r("p",[e._v("Charles 4 新增的主要功能包括：")]),e._v(" "),r("ol",[r("li",[e._v("支持 Http 2。")]),e._v(" "),r("li",[e._v("支持 IPv6。")])]),e._v(" "),r("h3",{attrs:{id:"安装charles"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装charles"}},[e._v("#")]),e._v(" 安装Charles")]),e._v(" "),r("hr"),e._v(" "),r("p",[e._v("官网安装，速度有点慢")]),e._v(" "),r("h3",{attrs:{id:"设置系统代理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置系统代理"}},[e._v("#")]),e._v(" 设置系统代理")]),e._v(" "),r("hr"),e._v(" "),r("ul",[r("li",[e._v("打开"),r("code",[e._v("Proxy")]),e._v("选项，选中其中的"),r("code",[e._v("macOS proxy")]),e._v("，打开系统代理\n"),r("a",{attrs:{href:"https://i.loli.net/2018/11/30/5c00e2579b119.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.loli.net/2018/11/30/5c00e2579b119.png",alt:"img"}}),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("在Chrome浏览器中是默认不使用系统代理的，需要在Chrome里手动设置，或者安装一个Chrome插件："),r("RouterLink",{attrs:{to:"chrome-extension://padekgcemlokbadohgkifijomclgjgif/options.html#!/about"}},[e._v("SwitchyOmega")]),e._v(" 。在上面设置一个charles的情景模式，如下图：")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://i.loli.net/2018/11/30/5c00e24dd1d67.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.loli.net/2018/11/30/5c00e24dd1d67.png",alt:"img"}}),r("OutboundLink")],1)]),e._v(" "),r("hr"),e._v(" "),r("h3",{attrs:{id:"charles的主界面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#charles的主界面"}},[e._v("#")]),e._v(" Charles的主界面")]),e._v(" "),r("hr"),e._v(" "),r("p",[r("a",{attrs:{href:"https://i.loli.net/2018/12/02/5c038362160e5.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.loli.net/2018/12/02/5c038362160e5.png",alt:"img"}}),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[e._v("页面有"),r("code",[e._v("Structure")]),e._v("和"),r("code",[e._v("Sequence")]),e._v("两种显示模式。")])]),e._v(" "),r("ol",[r("li",[r("code",[e._v("Structure")]),e._v(" 视图将网络请求按访问的域名分类。")]),e._v(" "),r("li",[r("code",[e._v("Sequence")]),e._v(" 视图将网络请求按访问的时间排序，"),r("code",[e._v("Sequence")]),e._v("类似于Chrome的开发者模式。")])]),e._v(" "),r("ul",[r("li",[e._v("对于显示在界面上的网页请求，可以在"),r("code",[e._v("Filter")]),e._v("中进行简单的筛选")])]),e._v(" "),r("h3",{attrs:{id:"筛选页面设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#筛选页面设置"}},[e._v("#")]),e._v(" 筛选页面设置")]),e._v(" "),r("hr"),e._v(" "),r("ul",[r("li",[e._v("在主界面"),r("code",[e._v("Filter")]),e._v("中输入需要筛选的网页")]),e._v(" "),r("li",[e._v("在Charles的菜单选项中选择"),r("code",[e._v("Proxy")]),e._v("->"),r("code",[e._v("Recording Settings")]),e._v("，然后选择"),r("code",[e._v("Inlcude")]),e._v("栏，"),r("code",[e._v("Add")]),e._v("你需要添加的网站。")]),e._v(" "),r("li",[e._v("在想要过滤的网页右键选择"),r("code",[e._v("Focus")]),e._v("，后在"),r("code",[e._v("Filter")]),e._v("栏右边勾选"),r("code",[e._v("Focused")]),e._v("项。")])]),e._v(" "),r("h3",{attrs:{id:"抓取https信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#抓取https信息"}},[e._v("#")]),e._v(" 抓取https信息")]),e._v(" "),r("hr"),e._v(" "),r("h4",{attrs:{id:"安装证书"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装证书"}},[e._v("#")]),e._v(" 安装证书")]),e._v(" "),r("p",[e._v("如果没有设置这一步的话，你是抓取不到https信息的，如果需要截取分析Https协议相关的内容，就需要安装Charles的CA证书。")]),e._v(" "),r("ol",[r("li",[e._v("在Charles顶部菜单栏中选择"),r("code",[e._v("Help")]),e._v("，在选择"),r("code",[e._v("SSL Proxying")]),e._v(" - > "),r("code",[e._v("Install Chrales Root Certificate")])]),e._v(" "),r("li",[e._v("在系统的"),r("code",[e._v("KeyClain")]),e._v("中将Charles的证书选为信任")]),e._v(" "),r("li",[e._v("设置某个网站或者所有网站都默认截取HTTPS请求，在"),r("code",[e._v("SSL Proxyingz Settings")]),e._v("中设置，"),r("code",[e._v("Add")]),e._v("一个新的规则。")])]),e._v(" "),r("h4",{attrs:{id:"修改get请求的参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#修改get请求的参数"}},[e._v("#")]),e._v(" 修改GET请求的参数")]),e._v(" "),r("p",[e._v("在上面已经设置好了之后，就可以对抓取到的Http请求进行改包，以百度为例，可以看出，搜索的内容就是在GET方法中的wd属性的值来决定的。")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://i.loli.net/2018/12/02/5c038391bbb02.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.loli.net/2018/12/02/5c038391bbb02.png",alt:"img"}}),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("所以我们给这个请求标记一个breakpoints，在Charles主界面enable breakpoints，然后Command + R刷新页面，页面请求会先经过Charles，再返回到浏览器中，可以看到目前搜索了一串字符test，将其改为测试，点击"),r("code",[e._v("Execute")]),e._v("，继续执行接受下一个请求，最后可以看到百度的结果为后面修改的内容。")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://i.loli.net/2018/12/02/5c0383b1a2fd4.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.loli.net/2018/12/02/5c0383b1a2fd4.png",alt:"img"}}),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=v.exports}}]);